<!DOCTYPE html>
<html lang="en">
    
  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Belajar MySql/MariaDb</title>
  <meta name="author" content="" />

  

  

  <meta name="generator" content="Hugo 0.21" />

  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link href="https://tipobrata.github.io/css/font-awesome.min.css" rel="stylesheet" id="theme-stylesheet">
  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://tipobrata.github.io/true">

  
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

  
  <link href="https://tipobrata.github.io/css/animate.css" rel="stylesheet">

  
  
    
    <link href="https://tipobrata.github.io/css/app.css" rel="stylesheet" id="theme-stylesheet">
  


  
  <link href="https://tipobrata.github.io/css/app.css" rel="stylesheet">
  

  
    
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    

  
  <link rel="shortcut icon" href="https://tipobrata.github.io/img/favicon.ico" type="image/x-icon" />
  

  <link href="https://tipobrata.github.io/css/google-font.css" rel="stylesheet">
  <link href="https://tipobrata.github.io/css/monokai-sublime.css" rel="stylesheet">
  <link href="https://tipobrata.github.io/css/owl.carousel.css" rel="stylesheet">
  <link href="https://tipobrata.github.io/css/owl.theme.css" rel="stylesheet">

  <link rel="alternate" href="https://tipobrata.github.io/index.xml" type="application/rss+xml" title="home">

  
  <meta property="og:title" content="Belajar MySql/MariaDb" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/post/2017/07/06/belajar-mysql-mariadb//" />
  <meta property="og:image" content="img/logo.png" />

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="205">

    <div class="navbar navbar-default yaml" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="https://tipobrata.github.io/">
                    <img src="https://tipobrata.github.io/img/logo.png" alt="Belajar MySql/MariaDb logo" class="hidden-xs hidden-sm">
                    <img src="https://tipobrata.github.io/img/logo-small.png" alt="Belajar MySql/MariaDb logo" class="visible-xs visible-sm">
                    <span class="sr-only">Belajar MySql/MariaDb - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="btn btn-primary" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation" aria-label="Skip to main navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fa fa-bars" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  <li class="dropdown">
                    
                    <a href="/">Home</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/blog/">Blog</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/contact/">Contact</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/about/">About</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

            <div class="title-bar">
      <div class="container">
          <h1>Belajar MySql/MariaDb</h1>
          
      </div>
    </div>
                
                
        <div id="content">
          <div role="main" id="main-content">
            <div class="main">
              <div class="container body-content docs blog">
                <div class="container">
                  <div class="row">

                  <div class="col-sm-2 col-md-2">
                  <div class="hidden-xs col-sm-3 col-md-2">    
                    <nav id="docs-navbar" class="docs-nav updates-nav visible-md visible-lg">
                      <ul class="nav" id="main-nav">
                        <li class="panel collapsed">
                        <div class="wrapper">                           
                          




<div class="hidden-xs col-sm-3 col-md-2">
<nav id="docs-subnavbar">
<ul class="nav nav-pills nav-stacked" data-spy="affix" data-offset-top="205">
<h4>List Post</h4>
    
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#login-ke-terminal-mysql">Login ke terminal mysql</a></li>
<li><a href="#create-table-master">Create Table MASTER</a></li>
<li><a href="#create-table-transaksi-1">Create Table TRANSAKSI 1</a></li>
<li><a href="#create-table-transaksi-2">Create Table TRANSAKSI 2</a></li>
<li><a href="#menggunakan-group-by">Menggunakan Group By</a></li>
<li><a href="#menggunakan-group-by-dan-sum">Menggunakan Group By dan Sum</a></li>
<li><a href="#menggunakan-left-join">Menggunakan Left Join</a></li>
<li><a href="#menggunakan-ifnull">Menggunakan Ifnull</a></li>
<li><a href="#database-inventory">Database Inventory</a></li>
</ul></li>
</ul></li>
</ul>
</nav>

    
    <a class="twitter-share-button"
        href="https://twitter.com/share"
        data-text="#"
        data-via="Code"
        data-counturl="#"
        data-count="vertical">
        Tweet
    </a>
    <div class="connect-widget"></div>
</ul>  

</nav>

</div>




                        </div>
                        </li>
                      </ul>
                    </nav>                   
                  </div>
                  </div>
                    
                    
                    <div class="col-sm-9 col-md-8 body" id="blog-listing-large">
                        <p class="text-muted text-uppercase mb-small text-right">By <a href="#">tipobrata</a> | 06 Jul 2017</p>
                        <div id="post-content">
                        <div class="wrapper">
                          

                        

<h3 id="login-ke-terminal-mysql">Login ke terminal mysql</h3>

<pre><code>cd /opt/lampp/bin 

$ ./mysql -u testuser -p

</code></pre>

<h3 id="create-table-master">Create Table MASTER</h3>

<pre><code>create table t_master as
select 1 id, 'A' data union all
select 2 id, 'B' data union all
select 3 id, 'C' data;
</code></pre>

<pre><code>MariaDB [testdb]&gt; select * from t_master;
+----+------+
| id | data |
+----+------+
|  1 | A    |
|  2 | B    |
|  3 | C    |
+----+------+
3 rows in set (0.00 sec)

</code></pre>

<h3 id="create-table-transaksi-1">Create Table TRANSAKSI 1</h3>

<pre><code>create table t_transaksi_1 as
select 1 id, 'DOC 1' doc, 2000 value union all
select 1 id, 'DOC 1' doc, 1000 value union all
select 2 id, 'DOC 2' doc, 5000 value union all
select 3 id, 'DOC 3' doc, 3000 value union all
select 3 id, 'DOC 4' doc, 3000 value union all
select 3 id, 'DOC 4' doc, 2000 value;
</code></pre>

<pre><code>MariaDB [testdb]&gt; select * from t_transaksi_1;
+----+-------+-------+
| id | doc   | value |
+----+-------+-------+
|  1 | DOC 1 |  2000 |
|  1 | DOC 1 |  1000 |
|  2 | DOC 2 |  5000 |
|  3 | DOC 3 |  3000 |
|  3 | DOC 4 |  3000 |
|  3 | DOC 4 |  2000 |
+----+-------+-------+
6 rows in set (0.00 sec)

</code></pre>

<h3 id="create-table-transaksi-2">Create Table TRANSAKSI 2</h3>

<pre><code>create table t_transaksi_2 as
select 2 id, 'DOC 2' doc, 2000 value union all
select 2 id, 'DOC 2' doc, 2000 value union all
select 3 id, 'DOC 3' doc, 4000 value union all
select 3 id, 'DOC 4' doc, 5000 value union all
select 3 id, 'DOC 4' doc, 1000 value;
</code></pre>

<pre><code>MariaDB [testdb]&gt; select * from t_transaksi_2;
+----+-------+-------+
| id | doc   | value |
+----+-------+-------+
|  2 | DOC 2 |  2000 |
|  2 | DOC 2 |  2000 |
|  3 | DOC 3 |  4000 |
|  3 | DOC 4 |  5000 |
|  3 | DOC 4 |  1000 |
+----+-------+-------+
5 rows in set (0.00 sec)

</code></pre>

<h3 id="menggunakan-group-by">Menggunakan Group By</h3>

<p>Sekarang kita buatkan summary untuk table TRANSAKSI pertama, menggunakan <code>GROUP BY</code> dan fungsi aggregat <code>SUM()</code>, menambahkan <code>value/nilai</code> dari <code>Doc</code> yang sama dan juga menampilkan <code>id</code> doc dari tabel master.</p>

<p>Contoh Penggunaannya:</p>

<pre><code>SELECT tbl_names.id, tbl_section.id, name, section
  FROM tbl_names
  JOIN tbl_section ON tbl_section.id = tbl_names.id 

//Jika menggunakan alias
SELECT n.id, s.id, n.name, s.section
  FROM tbl_names n
  JOIN tbl_section s ON s.id = n.id 

</code></pre>

<p>Implementasi:</p>

<pre><code>select a.id, a.data, t.doc, sum(value) value1
from t_master a
join t_transaksi_1 t on t.id=a.id
group by id, doc;
</code></pre>

<p>Tampilan pada command:</p>

<pre><code>MariaDB [testdb]&gt; select a.id, a.data, t.doc, sum(value) value1
    -&gt; from t_master a
    -&gt; join t_transaksi_1 t on t.id=a.id
    -&gt; group by id, doc;
+----+------+-------+--------+
| id | data | doc   | value1 |
+----+------+-------+--------+
|  1 | A    | DOC 1 |   3000 |
|  2 | B    | DOC 2 |   5000 |
|  3 | C    | DOC 3 |   3000 |
|  3 | C    | DOC 4 |   5000 |
+----+------+-------+--------+
4 rows in set (0.00 sec)
</code></pre>

<h3 id="menggunakan-group-by-dan-sum">Menggunakan Group By dan Sum</h3>

<p>Sekarang kita buatkan summary untuk table TRANSAKSI kedua, menggunakan GROUP BY dan fungsi aggregat SUM().</p>

<pre><code>select a.id, a.data, tt.doc, sum(value) value2
from t_master a
join t_transaksi_2 tt on tt.id=a.id
group by id, doc;
</code></pre>

<p>Implementasi :</p>

<pre><code>MariaDB [testdb]&gt; select a.id, a.data, tt.doc, sum(value) value2
    -&gt; from t_master a
    -&gt; join t_transaksi_2 tt on tt.id=a.id
    -&gt; group by id, doc;
+----+------+-------+--------+
| id | data | doc   | value2 |
+----+------+-------+--------+
|  2 | B    | DOC 2 |   4000 |
|  3 | C    | DOC 3 |   4000 |
|  3 | C    | DOC 4 |   6000 |
+----+------+-------+--------+
3 rows in set (0.00 sec)

</code></pre>

<h3 id="menggunakan-left-join">Menggunakan Left Join</h3>

<p>Sekarang menggabungkan SUMMARY dari TRANSAKSI pertama dan kedua, menggunakan LEFT JOIN menjadi seperti ini.</p>

<p>command yang di gunakan:</p>

<pre><code>select res1.id, res1.data, res1.doc
, value1
, value2
from (
select tm.id, data, doc, sum(value) value1
from t_master tm
join t_transaksi_1 tr on tm.id=tr.id
group by id, doc
) res1
left join (
select tm.id, data, doc, sum(value) value2
from t_master tm
join t_transaksi_2 tr on tm.id=tr.id
group by id, doc
) res2 on res1.id=res2.id and res1.doc=res2.doc;
</code></pre>

<p>Implementasi:</p>

<pre><code>MariaDB [testdb]&gt; select res1.id, res1.data, res1.doc
    -&gt; , value1
    -&gt; , value2
    -&gt; from (
    -&gt; select tm.id, data, doc, sum(value) value1
    -&gt; from t_master tm
    -&gt; join t_transaksi_1 tr on tm.id=tr.id
    -&gt; group by id, doc
    -&gt; ) res1
    -&gt; left join (
    -&gt; select tm.id, data, doc, sum(value) value2
    -&gt; from t_master tm
    -&gt; join t_transaksi_2 tr on tm.id=tr.id
    -&gt; group by id, doc
    -&gt; ) res2 on res1.id=res2.id and res1.doc=res2.doc;
+----+------+-------+--------+--------+
| id | data | doc   | value1 | value2 |
+----+------+-------+--------+--------+
|  1 | A    | DOC 1 |   3000 |   NULL |
|  2 | B    | DOC 2 |   5000 |   4000 |
|  3 | C    | DOC 3 |   3000 |   4000 |
|  3 | C    | DOC 4 |   5000 |   6000 |
+----+------+-------+--------+--------+
4 rows in set (0.00 sec)

</code></pre>

<h3 id="menggunakan-ifnull">Menggunakan Ifnull</h3>

<p>Namun masih ada yang sedikit aneh, karena ada nilai NULL di sana, maka kita gunakan perintah IFNULL() untuk mengunbahknya menjadi angka 0 (nol).</p>

<pre><code>select res1.id, res1.data, res1.doc
, ifnull(value1,0) value1
, ifnull(value2,0) value2
from (
select tm.id, data, doc, sum(value) value1
from t_master tm
join t_transaksi_1 tr on tm.id=tr.id
group by id, doc
) res1
left join (
select tm.id, data, doc, sum(value) value2
from t_master tm
join t_transaksi_2 tr on tm.id=tr.id
group by id, doc
) res2 on res1.id=res2.id and res1.doc=res2.doc;

</code></pre>

<p>Berikut Tampilan hasilnya:</p>

<pre><code>MariaDB [testdb]&gt; select res1.id, res1.data, res1.doc
    -&gt; , ifnull(value1,0) value1
    -&gt; , ifnull(value2,0) value2
    -&gt; from (
    -&gt; select tm.id, data, doc, sum(value) value1
    -&gt; from t_master tm
    -&gt; join t_transaksi_1 tr on tm.id=tr.id
    -&gt; group by id, doc
    -&gt; ) res1
    -&gt; left join (
    -&gt; select tm.id, data, doc, sum(value) value2
    -&gt; from t_master tm
    -&gt; join t_transaksi_2 tr on tm.id=tr.id
    -&gt; group by id, doc
    -&gt; ) res2 on res1.id=res2.id and res1.doc=res2.doc;
+----+------+-------+--------+--------+
| id | data | doc   | value1 | value2 |
+----+------+-------+--------+--------+
|  1 | A    | DOC 1 |   3000 |      0 |
|  2 | B    | DOC 2 |   5000 |   4000 |
|  3 | C    | DOC 3 |   3000 |   4000 |
|  3 | C    | DOC 4 |   5000 |   6000 |
+----+------+-------+--------+--------+
4 rows in set (0.00 sec)

</code></pre>

<p>Demikian TUTORIAL ini semoga membantu memahami penggunaan SUBQUERY, JOIN, GROUP BY, dan fungsi agregate SUM.</p>

<h3 id="database-inventory">Database Inventory</h3>

<ul>
<li>Buat tabel <code>items</code></li>
</ul>

<pre><code>MariaDB [inventory]&gt; create table items (id serial primary key, items_id integer not null, code varchar(20) not null, name varchar(200) null);
Query OK, 0 rows affected (0.30 sec)

</code></pre>

<ul>
<li>Insert Items:</li>
</ul>

<pre><code>insert into items (code, name)
select 'ITEM01', 'Barang Pertama' union all
select 'ITEM02', 'Barang Kedua' union all
select 'ITEM03', 'Barang Ketiga';
</code></pre>

<ul>
<li>Buat table <code>item_balances</code></li>
</ul>

<pre><code>create table item_balances (
id serial primary key,
item_id integer not null,
period date not null,
quantity numeric(15,2),
unit_price numeric(15,2),
CONSTRAINT FOREIGN KEY (item_id) references items(items_id) );
</code></pre>

<pre><code>alter table item_balances add constraint foreign key (item_id) references items(id);
</code></pre>


                      </div>
                        </div>
                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'diditwbw';
    var disqus_identifier = 'https:\/\/tipobrata.github.io\/post\/2017\/07\/06\/belajar-mysql-mariadb\/';
    var disqus_title = 'Belajar MySql\/MariaDb';
    var disqus_url = 'https:\/\/tipobrata.github.io\/post\/2017\/07\/06\/belajar-mysql-mariadb\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </div>

                    



                               
                    </div>                  
                </div>
            </div>
            </div>
            </div>
            </div>
            
        </div>
        
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        <footer role="contentinfo">
        <div class="container">
            <div class="row">
                <div class="left col-md-7">
                    <a id="footer-twitter-follow-btn" class="twitter-follow-button" href="https://twitter.com/tipobrata" data-show-count="true" data-lang="en">Follow</a>
                    
    
                    <script>window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));</script>
                </div>
                <div class="container">
                <div class="row">
                <div class="right col-md-5">
                    <ul class="links">
                        <li><a id="footer-terms-link" href="/">Homepage</a></li>
                        <li><a id="footer-terms-link" href="/blog/">Blog</a></li>
                        <li><a id="footer-support-link" href="/about/">About</a></li>
                        <li><a id="footer-privacy-link" href="/contact/">Contact</a></li>
                        <li><a href="http://twitter.com"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="http://facebook.com"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="http://google-plus.com"><i class="fa fa-google-plus"></i></a></li>
                    </ul>
                    <hr>
                    <div class="text-center">
                        <a id="footer-microsoft-link" class="logo" href="https://gohugo.io" alt="Power By Hugo">Power By Hugo</a>
                        <span>&copy; 2017 <span itemprop="publisher" itemscope itemtype="#"><span itemprop="name">Tipobrata</span></span></span>
                    </div>
                    
                </div>
                </div>
                </div>
            </div>
        </div>
    </footer>

    </div>
    

    


<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="https://tipobrata.github.io/js/front.js"></script>


<script src="https://tipobrata.github.io/js/backToTop.js"></script>
<script src="https://tipobrata.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


  </body>
</html>
